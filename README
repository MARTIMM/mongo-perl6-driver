Hello Perl6 and noSQL users!

This is working MongoDB driver at early stage of development.


VERSION

This version should be used with BSON 0.1.

It is compatible with Rakudo 2011.07.
For Rakudo 2011.09+ releases (based on NOM branch)
please use version from nom branch.


SYNOPSIS

Let's see what it can do...


    use MongoDB;

    my $connection = MongoDB::Connection.new( );
    my $database   = $connection.database( 'test' );
    my $collection = $database.collection( 'perl_users' );
    my $cursor;

    #### insert documents into collection ####

    my %document1 = {
        'name' => 'PaweÅ‚ Pabian',
        'nick' => 'bbkr',
        'versions' => [ 5, 6 ],
        'author' => {
            'BSON' => 'https://github.com/bbkr/BSON',
            'Integer::Tiny' => 'http://search.cpan.org/perldoc?Integer%3A%3ATiny',
        },
        'IRC' => True,
    };

    my %document2 = {
        'name' => 'Andrzej Cholewiusz',
        'nick' => 'andee',
        'versions' => [ 5 ],
        'IRC' => False,
    };

    $collection.insert( %document1, %document2 );

    #### find documents in collection ####

    # find everything
    my $cursor = $collection.find( );
    while $cursor.fetch( ) -> %document {
        %document.perl.say;
    }

    # or with condition
    $cursor = $collection.find( { 'nick' => 'bbkr' } );
    $cursor.fetch( ).perl.say;


    #### update documents in collection ####

    # update all documents
    $collection.update( { }, { '$set' => { 'company' => 'Implix' } } );

    # or only specific documents
    $collection.update( { 'nick' => 'andee' }, { '$push' => { 'versions' => 6 } } );


    #### remove documents from collection ####

    # remove specific documents
    $collection.remove( { 'nick' => 'bbkr' } );

    # or remove all documents
    $collection.remove( );


FLAGS

Flags are boolean values, false by default.
They can be used anywhere and in any order in methods.

    remove( { 'nick' => 'bbkr' }, :single_remove ); 
    remove( :single_remove, { 'nick' => 'bbkr' } ); # same

Currently supported
    insert  - :continue_on_errror
    find    - :no_cursor_timeout
    update  - :upsert, :multi_update
    remove  - :single_remove


FEATURE ROADMAP

List of things you may expect in nearest future.

* find_one( ) - syntactic sugar for selecting without cursor
* error handler
* database authentication
* drop database or collection
* more stuff from http://www.mongodb.org/display/DOCS/Mongo+Driver+Requirements


KNOWN LIMITATIONS

* big integers (int64)
* lack of Num or Rat support,
  this is directly related to not yet specified pack/unpack in Perl6
* speed,
  protocol correctness and clear code are priorities for now


BIG THANKS

For everyone on #perl6


CONTACT

You can find me on irc.freenode.net #perl6 channel as 'bbkr'.
