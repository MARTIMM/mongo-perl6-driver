branches:
  only:
    - master

language: perl6

perl6:
  - 2016.04-134-g9879233
#  - latest

# Install mongodb server at ./Travis-ci/MongoDB
#
#before_install:
#  - sh $TRAVIS_BUILD_DIR/Travis-ci/install-mongodb.sh 3.0.5

env:
#  - PATH=.:$TRAVIS_BUILD_DIR/Travis-ci/MongoDB:$PATH
  - TCI=${TRAVIS_BUILD_DIR}/Travis-ci
  - MDB=${TCI}/MongoDB
  - P6=${TCI}/P6Software/rakudo/install
  - PATH=${P6}/bin:${P6}/share/perl6/site/bin:$PATH
  - PERL6LIB=.,lib

install:
  - $TRAVIS_BUILD_DIR/Travis-ci/install-mongodb.sh 3.0.5
  - $TRAVIS_BUILD_DIR/Travis-ci/install-perl6.sh ${TRAVIS_PERL6_VERSION}

#  - rakudobrew build-panda ${TRAVIS_PERL6_VERSION#latest}
#  - rakudobrew build-panda
#  - panda installdeps .
#  - panda update
#  - panda install BSON Digest::MD5

cache:
  directories:
    - $TRAVIS_BUILD_DIR/Travis-ci

# Cannot use the mongod service because the version is too low (2.4.12)
#
#services:
#  - mongodb



